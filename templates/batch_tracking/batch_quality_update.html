<!-- Standalone Quality Update Form -->
<div class="card mt-3" id="qualityUpdateCard" style="display: none;">
    <div class="card-header bg-success text-white">
        <h6 class="mb-0"><i class="fas fa-clipboard-check"></i> Update Quality Status</h6>
    </div>
    <div class="card-body">
        <form id="qualityStatusForm" method="POST" action="{{ url_for('batch_tracking.update_batch_quality_direct', batch_id=batch.id) }}">
            <div class="row">
                <div class="col-md-6">
                    <label for="quality_status" class="form-label">Quality Status</label>
                    <select name="quality_status" id="quality_status" class="form-select" required>
                        <option value="">Select Status</option>
                        <option value="passed" {{ 'selected' if batch.inspection_status == 'passed' }}>Approved</option>
                        <option value="failed" {{ 'selected' if batch.inspection_status == 'failed' }}>Rejected</option>
                        <option value="pending" {{ 'selected' if batch.inspection_status == 'pending' }}>Pending</option>
                        <option value="quarantine" {{ 'selected' if batch.inspection_status == 'quarantine' }}>On Hold</option>
                    </select>
                </div>
                <div class="col-md-6">
                    <label for="quality_notes" class="form-label">Quality Notes</label>
                    <textarea name="quality_notes" id="quality_notes" class="form-control" rows="2" placeholder="Add inspection notes..."></textarea>
                </div>
            </div>
            <div class="row mt-3">
                <div class="col">
                    <button type="submit" class="btn btn-success">
                        <i class="fas fa-save"></i> Update Status
                    </button>
                    <button type="button" class="btn btn-secondary" onclick="hideQualityUpdate()">
                        <i class="fas fa-times"></i> Cancel
                    </button>
                </div>
            </div>
        </form>
    </div>
</div>

<script>
function showQualityUpdate() {
    document.getElementById('qualityUpdateCard').style.display = 'block';
    document.getElementById('qualityUpdateCard').scrollIntoView({ behavior: 'smooth' });
}

function hideQualityUpdate() {
    document.getElementById('qualityUpdateCard').style.display = 'none';
}
</script>